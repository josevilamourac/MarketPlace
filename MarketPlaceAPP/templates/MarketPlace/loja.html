{% extends "./index.html" %}

{% block nav %}
    <li class="nav-item"><a class="nav-link" href="{% url 'MarketPlaceAPP:carrinho' %}">Carrinho</a></li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">Loja</a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="#!">Todos os Produtos</a></li>
            <li>
                <hr class="dropdown-divider"/>
            </li>
            <li><a class="dropdown-item" href="#!">Items Populares</a></li>
        </ul>
    </li>

{% endblock %}

{% block header %}
    <header class="py-5">
        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3 text-center">
                <div class="m-4 m-lg-5">

                    <header class="bg-dark py-5">
                        <div class="container px-4 px-lg-5 my-5">
                            <div class="text-center text-white">
                                <h1 class="display-4 fw-bolder">Loja {{ store_id }}</h1>
                                <p class="lead fw-normal text-white-50 mb-0">Loja {{ descricao_loja }}</p>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </header>
{% endblock %}

{% block body %}
    <!-- Section-->

    <div class="container px-4 px-lg-5 mt-5">
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center"
             id="product-container">
            <!-- Products will be rendered here -->
        </div>
    <a href="{% url 'marketplace:add_product' store_id %}">Adicionar Produto</a>

    </div>


    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const products = [
                {name: "Produto 1 ", price: "40.00 - 80.00", image: "https://dummyimage.com/450x300/dee2e6/6c757d.jpg"},
                {name: "Produto 2", price: "18.00", image: "https://dummyimage.com/450x300/dee2e6/6c757d.jpg"},
                {name: "Produto 3", price: "25.00", image: "https://dummyimage.com/450x300/dee2e6/6c757d.jpg"},
                {name: "Produto 4", price: "40.00", image: "https://dummyimage.com/450x300/dee2e6/6c757d.jpg"},
            ];

            const productContainer = document.getElementById("product-container");

            function renderProducts() {
                if (products.length === 0) {
                    alert("Não há produtos disponíveis!");
                    return;
                }

                productContainer.innerHTML = "";

                products.forEach(product => {
                    const col = document.createElement("div");
                    col.classList.add("col", "mb-5");
                    col.innerHTML = `
                        <div class="card h-100">
                            <img class="card-img-top" src="${product.image}" alt="Product Image">
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <h5 class="fw-bolder">${product.name}</h5>
                                    <span class="fw-bold">€${product.price}</span>
                                </div>
                            </div>
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center">
                                    <a class="btn btn-outline-dark mt-auto" href="#">Adicionar ao Cart</a>
                                </div>
                            </div>
                        </div>
                    `;
                    productContainer.appendChild(col);
                });
            }

            renderProducts();
        });
    </script>
{% endblock %}
